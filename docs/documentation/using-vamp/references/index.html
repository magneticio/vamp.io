<!DOCTYPE html>




 <html class="no-js"> 
<head>

<script type="text/javascript">
theBaseUrl = "http://vamp.io/";
</script>
<base href="http://vamp.io/" />

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
  <title>Referencing artifacts - Vamp</title>
  <meta name="generator" content="Hugo 0.16" />

  
  <meta name="description" content="Vamp - Deploy and manage microservices with power and ease.">
  
  <link rel="canonical" href="./documentation/using-vamp/references/">
  
  <meta name="author" content="magnetic.io">
  

  <meta property="og:url" content="/documentation/using-vamp/references/">
  <meta property="og:title" content="Vamp">
  <meta property="og:image" content="/images/logo.svg">
  <meta name="apple-mobile-web-app-title" content="Vamp">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="shortcut icon" type="image/x-icon" href="./images/logo.svg">
  <link rel="icon" type="image/x-icon" href="./images/logo.svg">


  <style>
    @font-face {
      font-family: 'Icon';
      src: url('fonts/icon.eot?52m981');
      src: url('fonts/icon.eot?#iefix52m981')
      format('embedded-opentype'),
      url('fonts/icon.woff?52m981')
      format('woff'),
      url('fonts/icon.ttf?52m981')
      format('truetype'),
      url('fonts/icon.svg?52m981#icon')
      format('svg');
      font-weight: normal;
      font-style: normal;
    }
  </style>

  <link rel="stylesheet" href="css/style.css">

  <script src="js/vendor.js"></script>

  <script src="js/app.js"></script>

  
</head>
<body class="palette-primary-pink palette-accent-pink">


<div class="single-page">
  <nav aria-label="Header" id="header" class="top-menu">
  <div class="left">
    <a href="./">
      <div id="logo" class="logo"></div>
    </a>
  </div>

  <div class="right">
    <div class="top-menu-items" id="top-menu-items">

    </div>

    <div class="download">
      <a href="./documentation/installation/hello-world/" class="button button--red">
        Try Vamp
      </a>
    </div>

    <a href="https://github.com/magneticio/vamp" target="_blank" class="github-logo">
      <i class="fa fa-2x fa-github" aria-hidden="true"></i>
    </a>

    <div class="search-button">
      <i class="fa fa-lg fa-search"></i>
    </div>

  </div>
</nav>

<ul id="mobile-menu" style="display: none">
</ul>

<div id="search">
  <div class="search-bar">
    <div class="search-bar__back">
      <i class="fa fa-lg fa-times"></i>
    </div>
    <input class="search-bar__input" placeholder="Type your search here...">
  </div>
  <div class="search-results">
    <ul></ul>
  </div>
</div>


</div>

<div class="page documentation">
    <div class="menu" id="side-menu">
    </div>
    <div class="content">
      <h1 class="content-header">Referencing artifacts </h1>
      <div class="markdowned">
        

<p>With any artifact, Vamp allows you to either use an inline notation or reference the artifact by name. For references, you use the <code>reference</code> keyword or its shorter version <code>ref</code>. Think of it like either using actual values or pointers to a value. This has a big impact on how complex or simple you can make any blueprint, breed or deployment. It also impacts how much knowledge you need to have of all the different artifacts that are used in a typical deployment or blueprint.</p>

<p>Vamp assumes that referenced artifcats (the breed called <code>my_breed</code> in the example below) is available to load from its datastore at deploy time. This goes for all basic artifacts in Vamp: SLA&rsquo;s, gateways, conditions, escalations, etc.</p>

<h4 id="example-reference-notation">Example - reference notation</h4>

<p><strong>inline notation</strong></p>

<pre><code class="language-yaml">---
name: my_blueprint
  clusters:
    my_cluster:
      services:
        breed:
          name: my_breed
          deployable: registry.example.com/app:1.0
        scale:
          cpu: 2
          memory: 1024MB
          instances: 4
</code></pre>

<p><strong>reference notation</strong></p>

<pre><code class="language-yaml">---
name: my_blueprint
  clusters:
    my_cluster:
      services:
        breed:
          reference: my_breed
        scale:
          reference: medium  
</code></pre>

<h2 id="working-with-references">Working with references</h2>

<p>When you begin to work with Vamp, you will probably start with inline artifacts. You have everything in one place and can directly see what properties each artifact has. Later, you can start specialising and basically build a library of often used architectural components.</p>

<h3 id="example-use-of-references">Example use of references</h3>

<ul>
<li><a href="./documentation/using-vamp/references/#example-1">Create a library of containers</a></li>
<li><a href="./documentation/using-vamp/references/#example-2">Fix scales per environment</a></li>
<li><a href="./documentation/using-vamp/references/#example-3">Reuse a complex condition</a></li>
</ul>

<h4 id="example-1">Example 1</h4>

<p><strong>Create a library of containers</strong></p>

<p><strong>Use case:</strong> You have a Redis container you have tweaked and setup exactly the way you want it. You want to use that exact container in all your environments (dev, test, prod etc.).</p>

<p><strong>Implementation:</strong> Put all that info inside a breed and use either the Vamp UI or API to save it (below). Now you can just use the <code>ref: redis:1.0</code> notation anywhere in a blueprint.</p>

<p><code>POST /api/v1/breeds</code></p>

<pre><code class="language-yaml">---
name: redis:1.0
deployable: redis
ports: 6379/tcp
</code></pre>

<h4 id="example-2">Example 2</h4>

<p><strong>Fix scales per environment</strong></p>

<p><strong>Use case:</strong> You want to have a predetermined set of scales you can use per deployment per environment. For instance, a &ldquo;medium_production&rdquo; should be something else than a &ldquo;medium_test&rdquo;.</p>

<p><strong>Implementation:</strong> Put all that info inside a scale and use either the Vamp API to save it (below). Now you can use the <code>ref: medium_test</code> or <code>ref: medium_prod</code> notation anywhere a <code>scale</code> type is required.</p>

<p><code>POST /api/v1/scales</code></p>

<pre><code class="language-yaml">---
name: medium_prod
cpu: 2
memory: 4096MB
instances: 3
</code></pre>

<pre><code class="language-yaml">---
name: medium_test
cpu: 0.5
memory: 1024MB
instances: 1
</code></pre>

<h4 id="example-3">Example 3</h4>

<p><strong>Reuse a complex condition</strong></p>

<p><strong>Use case:</strong> You have created a complex condition to target a specific part of your traffic. In this case users with a cookie that have a specific session variable set in that cookie. You want to use that condition now and then to do some testing.</p>

<p><strong>Implementation:</strong> Put all that info inside a condition and use either the Vamp API to save it (below). Now you can use the  <code>ref: condition_empty_shopping_cart</code> anywhere that <code>condition</code> is required.</p>

<p><code>POST /api/v1/conditions</code></p>

<pre><code class="language-yaml">---
name: condition_empty_shopping_cart
condition: Cookie SHOPSESSION Contains shopping_basket_items=0 
</code></pre>

<div class="admonition note">
  <p class="admonition-title">What next?</p>
  <p><ul>
<li>Read about <a href="./documentation/using-vamp/workflows/">Vamp workflows</a></li>
<li>Check the <a href="./documentation/api/api-reference">API documentation</a></li>
<li><a href="./documentation/installation/hello-world">Try Vamp</a></li>
</ul>
</p>
</div>

      </div>
    </div>
</div>

<div class="lander-row lander-row--blue footer">
  <div class="container">
    <div class="row">
      <div class="col col-3">
        <h2 class="h2">Learn more</h2>
        <a href="./why-use-vamp/">
          <p class="text">Why use Vamp?</p>
        </a>
        <a href="./documentation/how-vamp-works/architecture-and-components">
          <p class="text">Documentation</p>
        </a>
        <a href="./about/">
          <p class="text">About us</p>
        </a>
        <a href="./resources/news/">
          <p class="text">News</p>
        </a>
        <a href="./contact/">
          <p class="text">Contact</p>
        </a>
      </div>
        <div class="col col-6">
        <h2 class="h2">All things code</h2>
          <a href="./support/">
            <p class="text">Support</p>
          </a>
          <a href="./resources/community/">
            <p class="text">Community</p>
          </a>
          <a href="https://github.com/magneticio/vamp" target="_blank">
            <p class="text">GitHub</p>
          </a>
          <a href="https://gitter.im/magneticio/vamp" target="_blank">
            <p class="text">Gitter</p>
          </a>
      </div>
      <div class="col col-6">
        <h2 class="h2">Stay up to date</h2>
        <p class="text">
          Leave your email for the latest news: We won’t spam you and won’t go off topic.
        </p>

        <form action="//magnetic.us9.list-manage.com/subscribe/post?u=c709b3ab8cce9e00d617e01b6&amp;id=c1465e21d0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" style="display: inline" target="_blank" novalidate="">
          <div class="input-group">
            <input type="email" name="EMAIL" id="mce-EMAIL" placeholder="Email">
            <a onclick="$(this).closest('form').submit()" class="button button--red not-active">
              <div class="button__icon button__icon--mail">
              </div>
            </a>
          </div>
        </form>

        
          
        


        <div class="social-buttons">
          <p class="text">Follow us on: </p>
          <a href="https://twitter.com/vamp_io" target="_blank">
            <i class="fa fa-2x fa-twitter"></i>
          </a>

          <a href="https://www.linkedin.com/company/magnetic-io" target="_blank">
            <i class="fa fa-2x fa-linkedin"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="footer-bottom lander-row--blue">
  <div class="container">
    <div class="part">
      <a href="./about/"><img class="magnetic-logo" src="./img/005-vamp/Logo/magnetic-logo-footer.svg" alt=""></a>
    </div>
    <div class="part">
      <img class="vamp-bat" src="./img/003-Small-icons/Medium-blue/VAMP-Medium.svg" alt="">
      <p class="text">Code licensed under <a type="application/rss+xml" href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2</a> © 2016 <a href="./about/">Magnetic.io</a></p>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59948816-1', 'auto');
  ga('send', 'pageview');

</script>

