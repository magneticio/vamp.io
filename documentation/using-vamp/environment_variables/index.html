<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Environment variables | vamp.io">
        
        <meta property="og:url" content="http://vamp.io/documentation/using-vamp/environment_variables/">
        <meta property="og:image" content="http://vamp.io/img/vamp_logo_blue_circle.png">
        <meta property="og:site_name" content="Vamp.io">
        
            
                <meta name="description" content="Environment variables &amp; dependencies Breeds and blueprints can have a lists of environment variables that will be injected into the container at runtime.You set environment variables with the environment_variables keyword or its shorter version env, e.g. both examples below are equivalent. --- environment_variables: PORT: 8080 --- env: PORT: 8080 Breeds can also have dependencies on other breeds. These dependencies should be stated explicitly, similar to how you would do in a Maven pom.xml, a Ruby Gemfile or similar package dependency systems, i.e: --- dependencies: cache: redis:1.1 In a lot of cases, dependencies coexist with interpolated environment variables or constants because exact values are not known untill deploy time.">           
                <meta property="og:description" content="Environment variables &amp; dependencies Breeds and blueprints can have a lists of environment variables that will be injected into the container at runtime.You set environment variables with the environment_variables keyword or its shorter version env, e.g. both examples below are equivalent. --- environment_variables: PORT: 8080 --- env: PORT: 8080 Breeds can also have dependencies on other breeds. These dependencies should be stated explicitly, similar to how you would do in a Maven pom.xml, a Ruby Gemfile or similar package dependency systems, i.e: --- dependencies: cache: redis:1.1 In a lot of cases, dependencies coexist with interpolated environment variables or constants because exact values are not known untill deploy time.">           
                <meta property="twitter:description" content="Environment variables &amp; dependencies Breeds and blueprints can have a lists of environment variables that will be injected into the container at runtime.You set environment variables with the environment_variables keyword or its shorter version env, e.g. both examples below are equivalent. --- environment_variables: PORT: 8080 --- env: PORT: 8080 Breeds can also have dependencies on other breeds. These dependencies should be stated explicitly, similar to how you would do in a Maven pom.xml, a Ruby Gemfile or similar package dependency systems, i.e: --- dependencies: cache: redis:1.1 In a lot of cases, dependencies coexist with interpolated environment variables or constants because exact values are not known untill deploy time.">           
            
                            
        
        <meta property="twitter:site" content="vamp.io">
        <meta property="twitter:title" content="Environment variables | vamp.io">
        <meta property="twitter:image" content="http://vamp.io/img/vamp_logo_blue.png">        
        <meta property="twitter:creator" content="vamp.io">    
        <meta property="twitter:url" content="http://vamp.io/documentation/using-vamp/environment_variables/">    
        <meta property="twitter:card" content="summary">    
        <title>Environment variables - documentation -  Vamp :: The Very Awesome Microservices Platform</title>
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/flat-ui/bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="http://vamp.io/css/flat-ui.min.css">
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/common-files/css/icon-font.css">
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/common-files/css/animations.css">
        <link rel="stylesheet" href="http://vamp.io/css/ui.min.css" >
        <link rel="icon" type="image/png" sizes="192x192"  href="http://vamp.io/img/favicon-192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="http://vamp.io/img/favicon-32.png">

        
        <script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
    mixpanel.init("3dc73f826819c8e11d0d9898ca4291c8");</script>
        
    </head>
<body>
<div class="page-wrapper">

<header class="header-3">
    <div class="container">
        <div class="row">
            <div class="navbar col-sm-12" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle"></button>
                    <a class="logo" href="http://vamp.io/"><img src="http://vamp.io/img/vamp_logo_blue_circle.svg" alt="vamp"></a>
                    <span id="alpha">alpha</span>
                </div>
                <div class="collapse navbar-collapse pull-right">
                    <ul class="nav pull-left">
                        <li><a href="http://vamp.io/documentation/">WHAT IS VAMP?</a></li>
                        <li><a href="http://vamp.io/quick-start/">QUICK START</a></li>
                        <li><a href="http://vamp.io/documentation/">DOCS</a></li>
                        <li><a href="http://vamp.io/blog/">BLOG</a></li>
                        <li><a href="https://github.com/magneticio/vamp/" target="_blank">GITHUB</a></li>
                        <li><a href="https://gitter.im/magneticio/vamp" target="_blank">Gitter</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="header-background"></div>
</header>

<section class="subheader">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                
                <h4>documentation
                
                
            </div>
        </div>
    </div>
</section>

<section class="content-wrapper">
    <div class="container">
        <div class="row">
            <div class="col-md-2">
                

<aside>
    <div id="sidenav">
        
        <ul class="sidenav-menu top-level">
            
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/documentation" data-target=".collapse_about-vamp" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>About Vamp</span>                
            </a>
            <ul class="collapse_about-vamp sub collapse ">
                
                <li>
                <a href="http://vamp.io/documentation" class="sub-menu-link"> What is Vamp?
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/about-vamp/service-discovery/" class="sub-menu-link"> Service discovery
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/installation/" data-target=".collapse_installation" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>Installing Vamp</span>                
            </a>
            <ul class="collapse_installation sub collapse ">
                
                <li>
                <a href="http://vamp.io/installation" class="sub-menu-link"> Components
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/installation/container_drivers/" class="sub-menu-link"> Container drivers
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/installation/configuration/" class="sub-menu-link"> Configuration
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/installation/installation/" class="sub-menu-link"> Installation details
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/installation/quick_start/" class="sub-menu-link"> Quick start Marathon
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/installation/osx" class="sub-menu-link"> Mac OS X
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/installation/mesosphere_dcos/" class="sub-menu-link"> DC/OS
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu active ">                 
            <a href="http://vamp.io/documentation/using-vamp/" data-target=".collapse_using-vamp" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>Using Vamp</span>                
            </a>
            <ul class="collapse_using-vamp sub collapse  in ">
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/" class="sub-menu-link"> Using Vamp
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/breeds/" class="sub-menu-link"> Breeds
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/blueprints/" class="sub-menu-link"> Blueprints
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/deployments/" class="sub-menu-link"> Deployments
                </a>
                </li>                
                
                <li class="active">
                <a href="http://vamp.io/documentation/using-vamp/environment_variables/" class="sub-menu-link"> Environment variables
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/gateways/" class="sub-menu-link"> Gateways
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/routings-and-filters/" class="sub-menu-link"> Routing &amp; filters
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/metrics-and-events/" class="sub-menu-link"> Metrics &amp; Events
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/sla-and-escalations/" class="sub-menu-link"> SLA &amp; escalations
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/references/" class="sub-menu-link"> Referencing artefacts
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/workflows/" class="sub-menu-link"> Workflows
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/sticky-sessions/" class="sub-menu-link"> Sticky Sessions
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/using-vamp/virtual-hosts/" class="sub-menu-link"> Virtual Hosts
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/documentation/guides/" data-target=".collapse_guides" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>Guides</span>                
            </a>
            <ul class="collapse_guides sub collapse ">
                
                <li>
                <a href="http://vamp.io/documentation/guides/" class="sub-menu-link"> Getting started tutorial
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/guides/getting-started-tutorial/1-deploying/" class="sub-menu-link"> 1. Deploying a blueprint
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/guides/getting-started-tutorial/2-canary-release/" class="sub-menu-link"> 2. Doing a canary release
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/guides/getting-started-tutorial/3-splitting-services/" class="sub-menu-link"> 3. Splitting into services
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/guides/getting-started-tutorial/4-merge-delete/" class="sub-menu-link"> 4. Merging and deleting services
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/documentation/api-reference/" data-target=".collapse_api-reference" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>API reference</span>                
            </a>
            <ul class="collapse_api-reference sub collapse ">
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/" class="sub-menu-link"> Overview
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/breeds/" class="sub-menu-link"> Breeds
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/blueprints/" class="sub-menu-link"> Blueprints
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/deployments/" class="sub-menu-link"> Deployments
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/gateways/" class="sub-menu-link"> Gateways
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/scales/" class="sub-menu-link"> Scales
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/filters/" class="sub-menu-link"> Filters
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/slas/" class="sub-menu-link"> Slas
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/escalations/" class="sub-menu-link"> Escalations
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/metrics-events/" class="sub-menu-link"> Events
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/api-reference/debug/" class="sub-menu-link"> Debug
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/documentation/cli-reference/" data-target=".collapse_cli-reference" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>CLI reference</span>                
            </a>
            <ul class="collapse_cli-reference sub collapse ">
                
                <li>
                <a href="http://vamp.io/documentation/cli-reference/" class="sub-menu-link"> Overview
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/cli-reference/installation/" class="sub-menu-link"> Installation &amp; config
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/cli-reference/commands/" class="sub-menu-link"> Commands
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
                        
            <li class="sub-menu">                 
            <a href="http://vamp.io/documentation/community/" data-target=".collapse_community" class="sub-menu-header collapsed" data-toggle="collapse">
                
                <span>Community</span>                
            </a>
            <ul class="collapse_community sub collapse ">
                
                <li>
                <a href="http://vamp.io/documentation/community/" class="sub-menu-link"> Issues &amp; Support
                </a>
                </li>                
                
                <li>
                <a href="http://vamp.io/documentation/community/contribute/" class="sub-menu-link"> Contribute to Vamp
                </a>
                </li>                
                
            </ul>
            
            </li>
                        
            
            <li>
                <a href="http://vamp.io/faq">
                    
                    <span>FAQ</span>
                </a>
                
            </li>
            
        </ul>
        
    </div>
</aside>

            </div>
            <div class="col-md-9 docs">
                

<h1 id="environment-variables-dependencies">Environment variables &amp; dependencies</h1>

<p>Breeds and blueprints can have a lists of environment variables that will be injected into the container at runtime.You set environment variables with the <code>environment_variables</code> keyword or its shorter version <code>env</code>, e.g. both examples below are equivalent.</p>

<pre><code class="language-yaml">---
environment_variables:
  PORT: 8080
</code></pre>

<pre><code class="language-yaml">---
env:
  PORT: 8080
</code></pre>

<p>Breeds can also have dependencies on other breeds. These dependencies should be stated explicitly, similar to how you would do in a Maven pom.xml, a Ruby Gemfile or similar package dependency systems, i.e:</p>

<pre><code class="language-yaml">---
dependencies:
  cache: redis:1.1
</code></pre>

<p>In a lot of cases, dependencies coexist with interpolated environment variables or constants because exact values are not known untill deploy time.</p>

<h2 id="hard-setting-a-variable">&lsquo;Hard&rsquo; setting a variable</h2>

<p>You want to &ldquo;hard set&rdquo; an environment variable, just like doing an <code>export MY_VAR=some_value</code> in a shell. This  variable could be some external dependency you have no direct control over: the endpoint of some service you use that is out of your control. It can also be some setting you want to tweak, like <code>JVM_HEAP_SIZE</code> or <code>AWS_REGION</code>.</p>

<pre><code class="language-yaml">---
name: java_aws_app:1.2.1
deployable: acmecorp/tomcat:1.2.1

environment_variables:
  JVM_HEAP_SIZE: 1200
  AWS_REGION: 'eu-west-1'     
</code></pre>

<h2 id="using-place-holders">Using place holders</h2>

<p>You may also want to define a place holder for a variable of which you do not know the actual value yet, but it should be filled in at runtime, i.e. when this breed actually gets deployed. This place holder is designated with a <code>~</code> character.</p>

<p>In the below example we designated the <code>ORACLE_PASSWORD</code> as a place holder. We require this variable to provided later.</p>

<pre><code class="language-yaml">---
name: java_aws_app:1.2.1
deployable: acmecorp/tomcat:1.2.1
environment_variables:
  JVM_HEAP_SIZE: 1200
  AWS_REGION: 'eu-west-1' 
  ORACLE_PASSWORD: ~    
</code></pre>

<blockquote>
<p><strong>Note</strong>: A typical use case for this would be when different roles in a company work on the same project. Developers can create place holders for variables that operations should fill in: it helps with separating responsibilities.</p>
</blockquote>

<h2 id="resolving-variables">Resolving variables</h2>

<p>Using the <code>$</code> character, you can reference other statements in a breed/blueprint. This allows you to dynamically resolve ports and hosts names we don&rsquo;t know till a deployment is done. You can also resolve to hard coded and published constants from some other part of the blueprint or breed, typically a dependency, i.e.:</p>

<pre><code class="language-yaml">---
name: blueprint1
clusters:
  frontend:
    breed:
      name: frontend_app:1.0
      deployable: acmecorp/tomcat:1.2.1      
    environment_variables:
      MYSQL_HOST: $backend.host        # resolves to a host at runtime
      MYSQL_PORT: $backend.ports.port  # resolves to a port at runtime
    dependencies:
      backend: mysql:1.0
  backend:
    breed: mysql:1.0
</code></pre>

<p>Vamp provides just one *magic** variable: the <code>host</code>. This resolves to the host or ip address of the referenced service. Strictly speaking the <code>host</code> reference resolves to the gateway agent endpoint, but users do need to concern themselves with this. Users can think of <em>one-on-one</em> connections where Vamp actually does server-side service discovery to decouple services.</p>

<blockquote>
<p><strong>Note</strong>: The <code>$</code> value is escaped by <code>$$</code>. A more strict notation is <code>${some_reference}</code></p>
</blockquote>

<p>We could even extend this further. What if the backend is configured through some environment variable, but the frontend also needs that information? Let&rsquo;s say the encoding type for our database. We just reference that environment variable using the exact same syntax:</p>

<pre><code class="language-yaml">---
name: blueprint1
clusters:
  frontend:
    breed:
      name: frontend_app:1.0
      deployable: acmecorp/tomcat:1.2.1      
    environment_variables:
      MYSQL_HOST: $backend.host       
      MYSQL_PORT: $backend.ports.port 
      BACKEND_ENCODING: $backend.environment_variables.ENCODING_TYPE
    dependencies:
      backend: mysql:1.0
  backend:
    breed: mysql:1.0
    environment_variables:
      ENCODING_TYPE: 'UTF8'   # injected into the backend MySQL container
</code></pre>

<p>You can do everything with <code>environment_variables</code> but <code>constants</code> allow you to just be a little bit cleaner with regard to what you want to expose and what not.</p>

<h2 id="environment-variable-scope">Environment variable scope</h2>

<p>Environment variables can live on different scopes and can be overridden by scopes higher in the scope hierarchy.
A scope is an area of your breed or blueprint definition that limits the visibility of variables and references inside that scope.</p>

<ol>
<li><p><strong>Breed scope</strong>: The scope we used in all the above examples is the default scope. If you never define any <code>environment_variables</code> in any other place, this will be used.</p></li>

<li><p><strong>Service scope</strong>: This scope can override breed scope and is part of the blueprint artefact. Use this to override environment variables in a breed when using references to breeds.</p></li>

<li><p><strong>Cluster scope</strong>: This scope can override the service scope and breed scope and is part of the blueprint artefact. Use this to override all environment variables in all services that belong to a cluster.</p></li>
</ol>

<blockquote>
<p><strong>Note:</strong> Using scopes effectively is completely up to your use case. The various scopes help to separate
concerns when multiple people and/or teams work on Vamp artefacts and deployments and need to decouple their effor</p>
</blockquote>

<p>Let&rsquo;s look at some examples:</p>

<h3 id="example-1-running-two-the-same-services-with-a-different-configuration">Example 1: Running two the same services with a different configuration</h3>

<p>As a dev/ops-er you want to test one service configured in two different ways at the same time. Your service is configurable using environment variables. In this case we are testing a connection pool setting. The blueprint would look like:</p>

<pre><code class="language-yaml">---
name: production_deployment:1.0
gateways:
  9050: frontend/port
clusters:
  frontend:
    services:
      -
        breed:
          name: frontend_app:1.0-a
          deployable: acmecorp/tomcat:1.2.1
          ports:
            port: 8080/http
          environment_variables:           
            CONNECTION_POOL: 30                
      -
        breed:
          name: frontend_app:1.0-b              # different breed name, same deployable
          deployable: acmecorp/tomcat:1.2.1
          ports:
            port: 8080/http
          environment_variables:           
            CONNECTION_POOL: 60                 # different pool size

  routing:
    frontend_app:1.0-a:
      weight: 50% 
    frontend_app:1.0-b:
      weight: 50% 
</code></pre>

<blockquote>
<p><strong>Note:</strong> we just use the breed level environment variables. We also split the traffic into a <sup>50</sup>&frasl;<sub>50</sub> divide between both services.</p>
</blockquote>

<h3 id="example-2-overriding-the-jvm-heap-size-in-production">Example 2: Overriding the JVM_HEAP_SIZE in production</h3>

<p>As a developer, you created your service with a default heap size you use on your development laptop and maybe on a test environment. Once your service goes &ldquo;live&rdquo;, an ops guy/gall should be able to override this setting.</p>

<pre><code class="language-yaml">---
name: production_deployment:1.0
gateways:
  9050: frontend/port
environment_variables:                  # cluster level variable 
  frontend.JVM_HEAP_SIZE: 2800          # overrides the breed level
clusters:
  frontend:
    services:
      -
        breed:
          name: frontend_app:1.0
          deployable: acmecorp/tomcat:1.2.1
          ports:
            port: 8080/http
          environment_variables:           
            JVM_HEAP_SIZE: 1200         # will be overridden by deployment level: 2800
</code></pre>

<blockquote>
<p><strong>Note:</strong> we override the variable <code>JVM_HEAP_SIZE</code> for the whole <code>frontend</code> cluster by specifically marking it with .dot-notation <code>cluster.variable</code></p>
</blockquote>

<h3 id="example-3-using-a-place-holder">Example 3: Using a place holder</h3>

<p>As a developer, you might not know some value your service needs at runtime, say the Google Anaytics ID your company uses. However, your Node.js frontend needs it! You can make this explicit by demanding that a variable is to be set by a higher scope by using the <code>~</code> place holder. When this variable is NOT provided, Vamp will report an error at deploy time.</p>

<pre><code class="language-yaml">---
name: production_deployment:1.0
gateways:
  9050: frontend/port
environment_variables:                            # cluster level variable 
  frontend.GOOGLE_ANALYTICS_KEY: 'UA-53758816-1'  # overrides the breed level
clusters:
  frontend:
    services:
      -
        breed:
          name: frontend_app:1.0
          deployable: acmecorp/node_express:1.0
          ports:
            port: 8080/http
          environment_variables:           
            GOOGLE_ANALYTICS_KEY: ~               # If not provided at higher scope, 
                                                  # Vamp reports error.
</code></pre>

<h3 id="example-4-combining-all-scopes-and-references">Example 4: Combining all scopes and references</h3>

<p>As a final example, let&rsquo;s combine some of the examples above and include referenced breeds. In this case, a we have two breed artefacts already stored in Vamp and include them by using the <code>ref</code> keyword.</p>

<p>We override all <code>JVM_HEAP_SIZE</code> variables at the top scope. However, we just want to tweak the <code>JVM_HEAP_SIZE</code> for service <code>frontend_app:1.0-b</code>. We do this by adding a <code>environment_variables</code> at the service level.</p>

<pre><code class="language-yaml">---
name: production_deployment:1.0
gateways:
  9050: frontend/port
environment_variables:                            # cluster level variable 
  frontend.JVM_HEAP_SIZE: 2400                    # overrides the breed level
clusters:
  frontend:
    services:
      - breed:
          ref: frontend_app:1.0-a
      - breed:
          ref: frontend_app:1.0-b        
        environment_variables:           
          JVM_HEAP_SIZE: 1800               # overrides the breed level AND cluster level
          
  routing:
    frontend_app:1.0-a:
      weight: 50% 
    frontend_app:1.0-b:
      weight: 50% 
</code></pre>

<h2 id="constants">Constants</h2>

<p>Sometimes you just want configuration information to be available in a breed or blueprint. You don&rsquo;t need that information to be directly exposed as an environment variable. As a convenience, Vamp allows you to set <code>constants</code>.
These are values that cannot be changed during deploy time.</p>

<pre><code class="language-yaml">---
clusters:
  frontend:
    breed:
      name: frontend_app:1.0
      environment_variables:
        MYSQL_HOST: $backend.host       
        MYSQL_PORT: $backend.ports.port 
        BACKEND_ENCODING: $backend.environment_variables.ENCODING_TYPE
        SCHEMA: $backend.constants.SCHEMA_NAME
      dependencies:
        backend: mysql:1.0
  backend:
    breed:
      name: mysql:1.0
      environment_variables:
        ENCODING_TYPE: 'UTF8'
      constants:
        SCHEMA_NAME: 'customers'    # NOT injected into the backend MySQL container
</code></pre>

                <span class="pull-right muted" style="margin-top: 15px">Found an error or a typo in these docs?<a href="https://github.com/magneticio/vamp.io/tree/master/content/documentation" target="_blank"> Submit an issue or a pull request!</a></span>
   
            </div>
            <div class="col-md-1 hidden-xs hidden-sm">
            </div>
        </div>
    </div>
</section>

<footer class="footer-1">
    <div class="container">
        <div class="row links">
            <nav>
                <div class="col-sm-3">
                    <h6>Learn more</h6>
                    <ul>
                        <li><a href="http://vamp.io/documentation/">About Vamp</a></li>
                        <li><a href="http://vamp.io/quick-start/">Quick start</a></li>
                        <li><a href="http://vamp.io/documentation/using-vamp/">Using Vamp</a></li>
                        <li><a href="http://vamp.io/documentation/guides/">Guides</a></li>
                        <li><a href="http://vamp.io/documentation/api-reference/">API reference</a></li>
                        <li><a href="http://vamp.io/documentation/cli-reference/">CLI reference</a></li>
                        <li><a href="http://vamp.io/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <h6>All things code</h6>
                    <ul>
                        <li><a href="http://vamp.io/contribute/">Contribute</a></li>
                        <li><a href="http://vamp.io/documentation/community/">Issues & support</a></li>
                        <li><a href="https://github.com/magneticio/vamp/" target="_blank">Github</a></li>
                        <li><a href="https://gitter.im/magneticio/vamp" target="_blank">Gitter</a></li>
                    </ul>
                </div>
                <div class="col-sm-5">
                    <h6>Stay up to date</h6>
                    <div class="subscribe-form">
                        <p class="muted subscribe-lead">Leave your email for the latest news: we won't spam you and won't go off topic.</p>
                        <form action="//magnetic.us9.list-manage.com/subscribe/post?u=c709b3ab8cce9e00d617e01b6&amp;id=c1465e21d0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" style="display: inline" target="_blank" novalidate>
                            <div class="mc-field-group input-group">
                                <input type="email" value="" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email">
                                <span class="input-group-btn">
                                <button type="submit" value="Sign up" name="subscribe" id="mc-embedded-subscribe-2" class="btn btn-info">SIGN UP</button>
                            </span>
                            </div>
                        </form>
                    </div>
                    <p>
                        Or subscribe to our <a href="http://vamp.io/index.xml">RSS feed</a>
                    </p>
                </div>
            </nav>
        </div>
        <div class="row licensing">
            <div class="col-sm-3">
                <div class="brand hidden-xs">
                    <img src="http://vamp.io/img/magneticio_logo_gray.svg">
                </div>
            </div>
            <div class="col-sm-4">
            </div>
            <div class="col-sm-5">
                <p class="muted pull-right">
                    Code licensed under <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> Â© 2015 <a href="http://magnetic.io/">Magnetic.io</a>
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>
<script>
(function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-59948816-1', 'auto');
ga('send', 'pageview');
</script>
<script src="http://vamp.io/vendor/theme/common-files/js/jquery-1.10.2.min.js"></script>
<script src="http://vamp.io/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/modernizr.custom.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/easing.min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/startup-kit.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/prettify.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/lang-yaml.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/lang-scala.js"></script>
<script src="http://vamp.io/vendor/prism/prism.js"></script>
<script src="http://vamp.io/js/ZeroClipboard.min.js"></script>
<script src="http://vamp.io/js/custom.js"></script>
<script>
$('document').ready(prettyPrint())
</script>
</div>
</body>

</html>
