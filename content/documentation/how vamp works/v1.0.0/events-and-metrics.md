---
date: 2016-10-21T09:00:00+00:00
title: Events and metrics
aliases:
    - /documentation/how-vamp-works/events-and-metrics
menu:
  main:
    identifier: "events-and-metrics-v100"
    parent: "How Vamp works"
    weight: 60
---

## How traffic is logged

Vamp works with Filebeat to store logs from HAProxy (via Vamp Gateway Agent) in Elasticsearch indices. Logs are stored with a unique ID and can be later visualised.

Vamp API actions (including those generated by Vamp workflows and the Vamp UI) and running service events are stored in Elasticsearch indices according to event type.

Data and events are read by Vamp components either directly from Elasticsearch or via the Vamp API:

* The Vamp UI reads data and events via the Vamp API. Health and Metrics events (generated by Vamp workflows) are required by the Vamp UI.
* Vamp workflows read formatted log data directly from Elasticsearch and events are via the Vamp API. 

![](/images/diagram/v093/events-and-metrics-flow.png)

## Formatted raw data (logs)

### HAProxy
Logs from HAProxy are read by Filebeat and shipped to Elasticsearch. The HAProxy log format is configurable using Vamp Lifter.

In general, for each HTTP/TCP request to HAProxy, several log messages are created for gateway, service and instance level.

## Events

Vamp collects events on all running services. Vamp API actions (including those generated by Vamp workflows and the Vamp UI) and running service events are stored by the Vamp API to specific Elasticsearch indices. Third party applications can also create events and trigger Vamp actions.

{{< note title="What next?" >}}
* Let's [install Vamp](/documentation/installation/v1.0.0/overview)
{{< /note >}}
