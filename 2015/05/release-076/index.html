<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Vamp 0.7.6: introducing the Marathon dialect | vamp.io">
        
        <meta property="og:type" content="article">
        
        <meta property="og:url" content="http://vamp.io/2015/05/release-076/">
        <meta property="og:image" content="http://vamp.io/img/vamp_logo_blue_circle.png">
        <meta property="og:site_name" content="Vamp.io">
        
            
                <meta name="description" content="Release 0.7.6 is tagged and you can check the full release note on Github. Notice that there are breaking changes in this release so please update where necessary. We&rsquo;ve updated our getting started tutorial to reflect the latest changes. Some of the highlights are below. Mesosphere Marathon dialect Vamp now allows you to use Marathon specific tags inside Vamp blueprints by using the marathon: tag. We call this a &ldquo;dialect&rdquo;. We will be enabling these dialects for all platforms Vamp supports (i.e.">           
                <meta property="og:description" content="Release 0.7.6 is tagged and you can check the full release note on Github. Notice that there are breaking changes in this release so please update where necessary. We&rsquo;ve updated our getting started tutorial to reflect the latest changes. Some of the highlights are below. Mesosphere Marathon dialect Vamp now allows you to use Marathon specific tags inside Vamp blueprints by using the marathon: tag. We call this a &ldquo;dialect&rdquo;. We will be enabling these dialects for all platforms Vamp supports (i.e.">           
                <meta property="twitter:description" content="Release 0.7.6 is tagged and you can check the full release note on Github. Notice that there are breaking changes in this release so please update where necessary. We&rsquo;ve updated our getting started tutorial to reflect the latest changes. Some of the highlights are below. Mesosphere Marathon dialect Vamp now allows you to use Marathon specific tags inside Vamp blueprints by using the marathon: tag. We call this a &ldquo;dialect&rdquo;. We will be enabling these dialects for all platforms Vamp supports (i.e.">           
            
            
                <meta name="keywords" content="releases news ">
                            
        
        <meta property="twitter:site" content="vamp.io">
        <meta property="twitter:title" content="Vamp 0.7.6: introducing the Marathon dialect | vamp.io">
        <meta property="twitter:image" content="http://vamp.io/img/vamp_logo_blue.png">        
        <meta property="twitter:creator" content="vamp.io">    
        <meta property="twitter:url" content="http://vamp.io/2015/05/release-076/">    
        <meta property="twitter:card" content="summary">    
        <title>Vamp 0.7.6: introducing the Marathon dialect - blog -  Vamp :: The Very Awesome Microservices Platform</title>
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/flat-ui/bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="http://vamp.io/css/flat-ui.min.css">
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/common-files/css/icon-font.css">
        <link rel="stylesheet" href="http://vamp.io/vendor/theme/common-files/css/animations.css">
        <link rel="stylesheet" href="http://vamp.io/css/ui.min.css" >
        <link rel="icon" type="image/png" sizes="192x192"  href="http://vamp.io/img/favicon-192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="http://vamp.io/img/favicon-32.png">

        
        <script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
    mixpanel.init("3dc73f826819c8e11d0d9898ca4291c8");</script>
        
    </head>
<body>
<div class="page-wrapper">

<header class="header-3">
    <div class="container">
        <div class="row">
            <div class="navbar col-sm-12" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle"></button>
                    <a class="logo" href="http://vamp.io/"><img src="http://vamp.io/img/vamp_logo_blue_circle.svg" alt="vamp"></a>
                    <span id="alpha">alpha</span>
                </div>
                <div class="collapse navbar-collapse pull-right">
                    <ul class="nav pull-left">
                        <li><a href="http://vamp.io/documentation/">WHAT IS VAMP?</a></li>
                        <li><a href="http://vamp.io/quick-start/">QUICK START</a></li>
                        <li><a href="http://vamp.io/documentation/">DOCS</a></li>
                        <li><a href="http://vamp.io/blog/">BLOG</a></li>
                        <li><a href="https://github.com/magneticio/vamp/" target="_blank">GITHUB</a></li>
                        <li><a href="https://gitter.im/magneticio/vamp" target="_blank">Gitter</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="header-background"></div>
</header>

<section class="subheader">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                
                <h4>blog
                
                
            </div>
        </div>
    </div>
</section>

        

<section>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-9 col-md-offset-2 docs blog post">
                <header>
                    <h1>Vamp 0.7.6: introducing the Marathon dialect</h1>
                    <div class="date muted">By Tim Nolet on  May 21, 2015</div>
                    <div class="pull-right social-buttons-horizontal">

  

  <a href="https://twitter.com/share" class="twitter-share-button" data-text="" data-url="" data-hashtags="microservices">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  

  <a href="https://news.ycombinator.com/submit" class="hn-button" data-title="" data-url="" data-count="horizontal" data-style="twitter">Vote on Hacker News</a> <script type="text/javascript">var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>

</div>
                </header>
                <section>
                    

<p>Release 0.7.6 is tagged and you can check the <a href="https://github.com/magneticio/vamp/releases/tag/0.7.6">full release note on Github</a>. Notice that there are breaking changes in this release so please update where necessary. We&rsquo;ve updated our <a href="http://vamp.io/getting-started/">getting started tutorial</a> to reflect the latest changes.
Some of the highlights are below.</p>

<h2 id="mesosphere-marathon-dialect">Mesosphere Marathon dialect</h2>

<p>Vamp now allows you to use Marathon specific tags inside Vamp blueprints by using the <code>marathon:</code> tag. We call this a &ldquo;dialect&rdquo;. We will be enabling these dialects for all platforms Vamp supports (i.e. a &lsquo;straight&rsquo; Docker driver and Kubernetes are on the roadmap).</p>

<p>This effectively allows you to make full use of the underlying Marathon features like mounting disks, settings commands and providing access to private Docker registries.</p>

<p>Let&rsquo;s look at an example blueprint that pulls an image from private repo, mounts some volumes, sets some labels and gets run with an ad hoc command: all taken care of by Marathon.</p>

<pre><code class="language-yaml">name: busy-top:1.0

clusters:

  busyboxes:
    services:
      breed:
        name: busybox
        deployable: registry.magnetic.io/busybox:latest
      marathon:
       cmd: &quot;top&quot;      
       uris:
         -
           &quot;https://some_host/some_path/some_file_with_docker_credentials&quot;
       labels:
         environment: &quot;staging&quot;
         owner: &quot;buffy the vamp slayer&quot;
       container:  
         volumes:
           -
             containerPath: &quot;/tmp/&quot;
             hostPath: &quot;/tmp/&quot;
             mode: &quot;RW&quot;
      scale:
        cpu: 0.1       
        memory: 256  
        instances: 1
</code></pre>

<p>Notice the following:</p>

<ol>
<li>Under the <code>marathon:</code> tag, we provide the command to run in the container by setting the <code>cmd:</code> tag.</li>
<li>We provide a url to some credentials file in the <code>uri</code> array. As described <a href="https://mesosphere.github.io/marathon/docs/native-docker.html#using-a-private-docker-repository">in the Marathon docs</a> this enables Mesos
to pull from a private registry, in this case registry.magnetic.io where these credentials are set up.</li>
<li>We set some labels with some arbitrary metadata.</li>
<li>We mount the <code>/tmp</code> to in Read/Write mode.</li>
</ol>

<p>We can provide the <code>marathon:</code> tag either on the service level, or the cluster level. Any <code>marathon:</code> tag set on the service level will override the cluster level as it is more specific. However, in 9 out of 10 cases the cluster level makes the most sense. Later, you can also mix dialects so you can prep your blueprint for multiple environments and run times within one description.</p>

<p>We are convinced this is a very convenient addition and helps users to leverage their container platform while using Vamp&rsquo;s powerful, higher level features.</p>

<p>Find all downloadable packages at:<br />
<a href="https://bintray.com/magnetic-io/downloads">https://bintray.com/magnetic-io/downloads</a></p>

<p>Closed issues:<br />
<a href="https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.7.6+is%3Aclosed">https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.7.6+is%3Aclosed</a></p>

<p>Tim Nolet, CTO</p>

                </section>
                <ul class="tags list-inline">
                    
                    <li><a class="label label-default" href="http://vamp.io/tags/releases">releases</a> </li>
                    
                    <li><a class="label label-default" href="http://vamp.io/tags/news">news</a> </li>
                    
                </ul>
                <div id="disqus_thread"></div>
<script type="text/javascript">

    (function() {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = '';
        dsq.src = '//vampio.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>
    </div>
</section>

<footer class="footer-1">
    <div class="container">
        <div class="row links">
            <nav>
                <div class="col-sm-3">
                    <h6>Learn more</h6>
                    <ul>
                        <li><a href="http://vamp.io/documentation/">About Vamp</a></li>
                        <li><a href="http://vamp.io/quick-start/">Quick start</a></li>
                        <li><a href="http://vamp.io/documentation/using-vamp/">Using Vamp</a></li>
                        <li><a href="http://vamp.io/documentation/guides/">Guides</a></li>
                        <li><a href="http://vamp.io/documentation/api-reference/">API reference</a></li>
                        <li><a href="http://vamp.io/documentation/cli-reference/">CLI reference</a></li>
                        <li><a href="http://vamp.io/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <h6>All things code</h6>
                    <ul>
                        <li><a href="http://vamp.io/contribute/">Contribute</a></li>
                        <li><a href="http://vamp.io/documentation/community/">Issues & support</a></li>
                        <li><a href="https://github.com/magneticio/vamp/" target="_blank">Github</a></li>
                        <li><a href="https://gitter.im/magneticio/vamp" target="_blank">Gitter</a></li>
                    </ul>
                </div>
                <div class="col-sm-5">
                    <h6>Stay up to date</h6>
                    <div class="subscribe-form">
                        <p class="muted subscribe-lead">Leave your email for the latest news: we won't spam you and won't go off topic.</p>
                        <form action="//magnetic.us9.list-manage.com/subscribe/post?u=c709b3ab8cce9e00d617e01b6&amp;id=c1465e21d0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" style="display: inline" target="_blank" novalidate>
                            <div class="mc-field-group input-group">
                                <input type="email" value="" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email">
                                <span class="input-group-btn">
                                <button type="submit" value="Sign up" name="subscribe" id="mc-embedded-subscribe-2" class="btn btn-info">SIGN UP</button>
                            </span>
                            </div>
                        </form>
                    </div>
                    <p>
                        Or subscribe to our <a href="http://vamp.io/index.xml">RSS feed</a>
                    </p>
                </div>
            </nav>
        </div>
        <div class="row licensing">
            <div class="col-sm-3">
                <div class="brand hidden-xs">
                    <img src="http://vamp.io/img/magneticio_logo_gray.svg">
                </div>
            </div>
            <div class="col-sm-4">
            </div>
            <div class="col-sm-5">
                <p class="muted pull-right">
                    Code licensed under <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> © 2015 <a href="http://magnetic.io/">Magnetic.io</a>
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>
<script>
(function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-59948816-1', 'auto');
ga('send', 'pageview');
</script>
<script src="http://vamp.io/vendor/theme/common-files/js/jquery-1.10.2.min.js"></script>
<script src="http://vamp.io/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/modernizr.custom.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/easing.min.js"></script>
<script src="http://vamp.io/vendor/theme/common-files/js/startup-kit.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/prettify.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/lang-yaml.js"></script>
<script src="http://vamp.io/vendor/google-code-prettify/lang-scala.js"></script>
<script src="http://vamp.io/vendor/prism/prism.js"></script>
<script src="http://vamp.io/js/ZeroClipboard.min.js"></script>
<script src="http://vamp.io/js/custom.js"></script>
<script>
$('document').ready(prettyPrint())
</script>
</div>
</body>

</html>

